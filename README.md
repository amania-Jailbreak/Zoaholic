# Zoaholic

-   名前: Zoaholic
-   フレームワーク・言語: Node.js

## 概要

Zoaholic（本プログラム）は、複数サーバー間で相互に死活監視を行うためのソフトウェアです。  
現在の実装では、以下のモードと機能が利用可能です。

-   ホストモード
-   クライアントモード
-   アップデートモード (シミュレーション)
-   レスキューモード (シミュレーション)
-   プラグインシステム

各モードを切り替えながら運用します。

### ホストモード

WebUI からアクセスでき、クライアントモードのサーバーを統括管理します。  
各サーバーの動作ログやアップデート管理も行います。  
WebSocket サーバー（HOST-WS）が起動し、クライアントからのログ受信や操作を担当します。  
受信したクライアントのログは `logs/client_messages.log` に保存されます。  
ホストプラグインを動的にロードし、機能を拡張します。  
クライアントへのアップデートをトリガーするためのHTTPエンドポイントを提供します。

### クライアントモード

WebUI は停止し、軽量動作に切り替わります。  
自身のホスト名で識別され、CPU、メモリ、ディスク、ネットワークの使用率を含むシステム情報を収集し、ホストへ送信します。  
クライアントプラグインを動的にロードし、機能を拡張します。  
ホストからのアップデートコマンドを受信し、GitHubリポジトリからのファイル取得をシミュレートします。

### アップデートモード

ホストからのアップデート要求で切り替わるモードです。  
指定されたGitHubリポジトリからファイルをダウンロードし、既存のファイルを置き換えるプロセスをシミュレートします。  
アップデート後、クライアントモードへ復帰します。

### レスキューモード

コマンドライン引数 (`node src/client.js --mode rescue`) で起動するモードです。  
設定を初期化し、GitHub の安定版 Release から差分を取得して復元するプロセスをシミュレートします。  
通常はこのモードに入ることはありません。

### WebUI

Tailwind CSS を用いたモダンでレスポンシブなUIです。  
接続されているクライアントのステータス、システム情報、Dockerコンテナ情報などを表示します。  
クライアントへのアップデートをトリガーするための操作ボタンが追加されています。

### プラグイン

ホスト用・クライアント用の 2 種類があります。  
`plugins/host` および `plugins/client` ディレクトリ内のJavaScriptファイルを動的にロードします。  
例として、クライアント側にはDockerコンテナを監視するプラグインが実装されています。

### バックアップ

現在、バックアップ機能は未実装です。

## 起動方法

プロジェクトのルートディレクトリで、以下のコマンドを実行します。

-   **ホストモードとWebUIを同時に起動:** `npm start`
-   **ホストモードのみを起動:** `npm run server`
-   **クライアントモードを起動:** `npm run client`
-   **レスキューモードを起動:** `node src/client.js --mode rescue`